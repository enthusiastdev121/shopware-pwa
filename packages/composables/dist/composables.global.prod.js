var composables=function(t,e,a){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;const n={endpoint:"https://shopware-2.vuestorefront.io/sales-channel-api/v1",accessToken:"SWSCMUDKAKHSRXPJEHNOSNHYAG",contextToken:"",defaultPaginationLimit:10};let o={};!function(t={}){o=Object.assign(o,n,t)}();const c=function(t){o=Object.assign(o,t)},r=o;const u=a.create({});function s(){u.defaults.baseURL=r.endpoint,u.defaults.headers.common["sw-access-key"]=r.accessToken,r.contextToken?u.defaults.headers.common["sw-context-token"]=r.contextToken:delete u.defaults.headers.common["sw-context-token"]}s(),u.interceptors.response.use((function(t){return function(t={}){c(t),s(),T()}({contextToken:t.headers["sw-context-token"]}),t}),(async function(t){throw t}));const i=t=>`/product/${t}`,l=()=>"/checkout/cart",d=t=>`/checkout/cart/product/${t}`,f=t=>`/checkout/cart/line-item/${t}`,m=()=>"/vsf/page";var p,h;async function E(t,e=null){return(await u.get(i(t),{params:e})).data.data}!function(t){t[t.ONE=1]="ONE",t[t.FIVE=5]="FIVE",t[t.TEN=10]="TEN",t[t.TWENTY_FIVE=25]="TWENTY_FIVE",t[t.FIFTY=50]="FIFTY",t[t.SEVENTY_FIVE=75]="SEVENTY_FIVE",t[t.HUNDRED=100]="HUNDRED",t[t.FIVE_HUNDRED=500]="FIVE_HUNDRED"}(p||(p={})),function(t){t.PRODUCT="product",t.CREDIT="credit",t.CUSTOM="custom",t.PROMOTION="promotion"}(h||(h={}));const y=[];function T(){y.forEach(t=>t({config:r}))}let v;function w(){return v}return t.getStore=w,t.setStore=function(t){v=t},t.useCart=()=>{let t=w();const a=e.ref(!1),n=e.ref(null);const o=e.computed(()=>t.getters.getCart),c=e.computed(()=>o.value&&o.value.lineItems||[]),r=e.computed(()=>c.value.reduce((t,e)=>e.quantity+t,0)),s=e.computed(()=>{return o.value&&o.value.price&&o.value.price.totalPrice||0});return{addProduct:async function({id:e,quantity:a}){const n=await async function(t,e){return(await u.post(d(t),{quantity:e})).data.data}(e,a);t.commit("SET_CART",n)},cart:o,cartItems:c,changeProductQuantity:async function({id:e,quantity:a}){const n=await async function(t,e=1){let a={quantity:parseInt(e.toString())};return(await u.patch(f(t),a)).data.data}(e,a);t.commit("SET_CART",n)},count:r,error:n,loading:a,refreshCart:async function(){a.value=!0;try{const e=await async function(){return(await u.get(l())).data.data}();t.commit("SET_CART",e)}catch(t){n.value=t,console.error("Problem with fetching data",t.message)}finally{a.value=!1}},removeProduct:async function({id:e}){const a=await async function(t){return(await u.delete(f(t))).data.data}(e);t.commit("SET_CART",a)},totalPrice:s}},t.useCms=()=>{const t=e.ref(!1),a=e.ref(null),n=e.ref(null);return{page:a,loading:t,search:async e=>{t.value=!0;try{const n=await async function(t,e){return(await u.post(m(),{path:t})).data}(e);return a.value=n,n}catch(t){n.value=t,console.error("Problem with fetching data",t.message)}finally{t.value=!1}},error:n}},t.useProduct=t=>{const a=e.ref(!1),n=e.ref(t),o=e.ref(null);return{product:n,loading:a,search:async t=>{a.value=!0;try{const e=await E(t);return n.value=e,e}catch(t){o.value=t,console.error("Problem with fetching data",t.message)}finally{a.value=!1}},error:o,loadAssociations:async t=>{if(!n||!n.value||!n.value.id)throw"Associations cannot be loaded for undefined product";const e=await E(n.value.id,t);n.value=e}}},t}({},compositionApi,axios);
