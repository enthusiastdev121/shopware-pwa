import{ref as t}from"@vue/composition-api";import e from"axios";const n={endpoint:"https://shopware-2.vuestorefront.io/sales-channel-api/v1",accessToken:"SWSCMUDKAKHSRXPJEHNOSNHYAG",contextToken:"",defaultPaginationLimit:10};let o={};!function(t={}){o=Object.assign(o,n,t)}();const a=function(t){o=Object.assign(o,t)},c=o;const s=e.create({});function r(){s.defaults.baseURL=c.endpoint,s.defaults.headers.common["sw-access-key"]=c.accessToken,c.contextToken?s.defaults.headers.common["sw-context-token"]=c.contextToken:delete s.defaults.headers.common["sw-context-token"]}r(),s.interceptors.response.use((function(t){return function(t={}){a(t),r(),h()}({contextToken:t.headers["sw-context-token"]}),t}),(async function(t){throw t}));const i=t=>`/product/${t}`,u=()=>"/vsf/page";var l,f;async function d(t,e=null){return(await s.get(i(t),{params:e})).data.data}!function(t){t[t.ONE=1]="ONE",t[t.FIVE=5]="FIVE",t[t.TEN=10]="TEN",t[t.TWENTY_FIVE=25]="TWENTY_FIVE",t[t.FIFTY=50]="FIFTY",t[t.SEVENTY_FIVE=75]="SEVENTY_FIVE",t[t.HUNDRED=100]="HUNDRED",t[t.FIVE_HUNDRED=500]="FIVE_HUNDRED"}(l||(l={})),function(t){t.PRODUCT="product",t.CREDIT="credit",t.CUSTOM="custom",t.PROMOTION="promotion"}(f||(f={}));const E=[];function h(){E.forEach(t=>t({config:c}))}const m=()=>{const e=t(!1),n=t(null),o=t(null);return{page:n,loading:e,search:async t=>{e.value=!0;try{const o=await async function(t,e){return(await s.post(u(),{path:t})).data}(t);return n.value=o,o}catch(t){o.value=t,console.error("Problem with fetching data",t.message)}finally{e.value=!1}},error:o}},p=e=>{const n=t(!1),o=t(e),a=t(null);return{product:o,loading:n,search:async t=>{n.value=!0;try{const e=await d(t);return o.value=e,e}catch(t){a.value=t,console.error("Problem with fetching data",t.message)}finally{n.value=!1}},error:a,loadAssociations:async t=>{n.value=!0;try{const e=await d(o.value.id,t);o.value=e}catch(t){a.value=t,console.error("Problem with fetching data",t.message)}finally{n.value=!1}}}};export{m as useCms,p as useProduct};
